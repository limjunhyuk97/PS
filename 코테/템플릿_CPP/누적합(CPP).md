# 누적합

## 불변 누적합의 경우

- 불변 누적합은 어떤 **주어진 수의 뭉치에 대해 더 이상 누적이 일어나지 않는 경우**를 의미한다.
- 이와 같은 경우에 DP를 쓰는 이유는, 중복된 연산을 줄이기 위해서다. 즉, 특정 구간을 중복하여 더하는 연산을 여러번 하는 것을 방지하기 위해서 이다.
- **미리 누적합을 구해놓는다.**

### 1차원

- **누적합** : acc[n] += acc[n-1]
- **구간합** : acc[n] 은 arr[1] + arr[2] + arr[3] + ... + arr[n] 을 이용한다.
    - arr[n] + ... arr[m] = acc[m] - acc[n-1]
- **어떤 구간의 합을 빠르게 구하기 위해서 사용**할 수 있다.

```cpp
// 초기화
acc[i] += acc[i-1];

// 부분 면적의 값
acc[i] - acc[j-1]
```

### 2차원

- **누적합** : acc[n][m] = acc[n-1][m] + acc[n][m-1] - acc[n-1][m-1] + arr[n][m]
    - acc[n-1][m] : 위쪽 직사각형 면적
    - acc[n][m-1] : 왼쪽 직사각형 면적
    - acc[n-1][m-1] : 두번 빠지는 부분의 면적
    - arr[n][m] : 현재 격자 속 값
- **구간합** : (x1,y1) ~ (x2,y2) 의 면적이 얼마인가?
    - acc[x2][y2] - acc[x2][y1-1] - acc[x1-1][y2] + acc[x1-1][y1-1]
- **어떤 격자 면적의 합을 빠르게 구하기 위해서 사용**할 수 있다.

```cpp
// 초기화
grid[i][j] = grid[i-1][j] + grid[i][j-1] - grid[i-1][j-1] + grid[i][j]

// 부분 면적 값
grid[x2][y2] - grid[x2][y1-1] - grid[x1-1][y2] + grid[x1-1][y1-1]
```

## 가변 누적합의 경우

- 불변 누적합은 어떤 **주어진 수의 뭉치에 대해 값의 누적이 일어나는 경우**를 의미한다.
- 값의 변경이 일어나기 때문에 구간의 값, 구간에서의 최대 최소 값 등을 빠르게 구하기 위해서 **구간합의 변경을 추적할 수 있는 방법이 필요**하다.

### 누적의 누적합

- **값의 변경을 일으키는 누적값들을 누적시켜 둔다. 후에, 이 누적된 누적값들에 대한 누적합을 한번에 구해서 연산의 중복을 방지**한다.
    - **부분적인 연속 구간의 갱신 O / 기존 배열 갱신 X**
    - 값을 추출할 때 연산을 수행한다.
- 말로 풀어쓰기 어려워서 누적의 누적합이라 부르기로 했다.

```cpp

```
  
### 세그먼트 트리

- **누적의 영향이 적용되어야 하는 모든 부분적인 연속 구간들에 대해 누적을 적용**시킨다.
    - **부분적인 연속구간의 갱신 X / 기존 배열 갱신 O**
    - 값을 추출할때 별다른 연산이 필요없다.
- 다양한 경우에 범용적으로 적용시킬 수 있다.
    
```cpp

```
